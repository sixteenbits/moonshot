#include <genesis.h>

#ifndef PHASE1_H

#define PHASE1_H

//anims

#define UP 0
#define IDLE 4
#define RIGHT 1
#define DOWN 2
#define LEFT 3

// enemy anims

#define ENEMY_UP 0
#define ENEMY_RIGTH 1
#define ENEMY_DOWN 2
#define ENEMY_LEFT 3

#define ENEMY_UP_IDLE 4
#define ENEMY_RIGTH_IDLE 5
#define ENEMY_DOW_IDLE 6
#define ENEMY_LEFT_IDLE 7

#define ENEMY_UP_EXC 8
#define ENEMY_UP_EXC_IDLE 12

struct phase1_data{
    u16 tile_index;
    u16 player_x;
    u16 player_y;
    Sprite* player_sprt;
    u8 life;
    u8 lives;
    u16** maps;
};

const u16 map1[1120] = {25,10,11,10,11,10,11,10,11,10,11,10,11,72,73,74,75,10,11,10,11,10,11,10,11,10,11,72,73,74,75,10,11,10,11,10,11,10,11,12,
41,35,36,35,36,137,138,139,140,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,67,68,35,36,35,36,35,36,35,36,35,36,35,36,28,
25,51,52,51,52,153,154,155,156,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,83,84,51,52,51,52,51,52,51,52,51,52,51,52,44,
41,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,67,68,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,28,
25,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,83,84,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,44,
41,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,67,68,35,36,35,36,35,36,35,36,35,36,35,36,28,
25,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,83,84,51,52,51,52,51,52,51,52,51,52,51,52,44,
41,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,67,68,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,28,
25,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,83,84,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,44,
41,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,67,68,35,36,35,36,35,36,35,36,35,36,35,36,28,
25,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,83,84,51,52,51,52,51,52,51,52,51,52,51,52,44,
41,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,67,68,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,28,
25,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,83,84,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,44,
41,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,67,68,35,36,35,36,35,36,35,36,35,36,35,36,28,
25,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,83,84,51,52,51,52,51,52,51,52,51,52,51,52,44,
41,35,36,35,36,35,36,137,138,138,138,139,140,35,35,35,35,35,36,35,35,35,35,35,35,35,35,35,35,35,35,35,36,35,36,35,36,35,36,28,
25,51,52,51,52,51,52,153,154,154,154,155,156,51,51,51,51,51,52,51,51,51,51,51,51,51,51,51,51,51,51,51,52,51,52,51,52,51,52,44,
41,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,35,36,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,28,
25,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,51,52,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,44,
41,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,35,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,28,
25,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,51,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,44,
41,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,28,
25,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,44,
41,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,28,
25,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,44,
41,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,35,36,28,
41,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,51,52,44,
57,58,59,58,59,58,58,58,58,58,120,121,122,123,58,58,58,58,58,58,58,58,58,58,58,120,121,122,123,58,58,58,58,58,58,58,58,58,59,60};

const u16 map_1b[1120]= {94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,169,170,94,94,94,94,94,
94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,185,186,94,94,94,94,94,
94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,185,186,94,94,94,94,94,
94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,201,202,94,94,94,94,94,
94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,217,218,94,94,94,94,94,
94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,233,234,94,94,94,94,94,
94,94,94,94,94,94,94,94,94,171,172,173,174,175,176,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,
94,94,94,94,94,94,94,94,94,187,188,189,190,191,192,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,
94,94,94,94,94,94,94,94,94,203,204,205,206,207,208,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,
94,94,94,94,94,94,94,94,94,219,220,221,222,223,224,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,
94,94,94,94,94,94,94,94,94,235,236,237,238,239,240,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,
94,94,94,94,94,94,94,94,94,251,252,253,254,255,256,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,
94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,
94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,169,170,94,94,94,94,94,
94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,185,186,94,94,94,94,94,
94,227,228,229,230,231,232,94,94,94,94,94,94,227,228,229,230,231,229,229,229,229,229,229,229,229,229,229,229,229,229,229,232,185,186,94,94,94,94,94,
94,243,244,245,246,247,248,94,94,94,94,94,94,243,244,245,246,247,245,245,245,245,245,245,245,245,245,245,245,245,245,245,248,185,186,94,94,94,94,94,
94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,185,186,94,94,94,94,94,
94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,185,186,94,94,94,94,94,
94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,185,186,94,94,94,94,94,
94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,185,186,94,94,94,94,94,
94,94,94,94,94,37,38,94,94,94,94,94,94,94,94,94,94,94,94,5,6,94,94,94,94,94,94,94,94,94,94,94,94,185,186,94,94,94,94,94,
94,94,94,94,94,53,54,94,94,94,94,94,94,94,94,94,94,94,94,21,22,94,94,94,94,94,94,94,94,94,94,94,94,185,186,94,94,94,94,94,
94,94,94,94,94,69,70,94,94,94,94,94,94,94,94,94,94,94,94,5,6,5,6,94,94,94,94,94,94,94,94,94,94,201,202,94,94,94,94,94,
94,94,94,94,94,85,86,94,94,94,94,94,94,94,94,94,94,94,94,21,22,21,22,94,94,94,94,94,94,94,94,94,94,217,218,94,94,94,94,94,
94,94,94,94,94,101,102,94,94,94,94,94,94,94,94,94,94,94,94,5,6,5,6,5,6,94,94,94,94,94,94,94,94,233,234,94,94,94,94,94,
94,94,94,94,94,117,118,94,94,94,94,94,94,94,94,94,94,94,94,21,22,21,22,21,22,94,94,94,94,94,94,94,94,249,250,94,94,94,94,94,
94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,94,0,0,94,221,222,94,94};

void* phase1_init();
void phase1_destroy(void*);

/**
 * Returns 
 *   0 -> In game, 
 *   1 -> Player wins
 *   2-> Player Loose
 * */
u16 phase1_update(void*, u16 frame);

/**
 * Manejador de entrada
 * joy-> Indica el mando que ha activado la entrada
 * state -> Indica el estado del mando (boton activado)
 * changed -> indica si ha cambiado (pulsado o solatado)
 * */
void phase1_input_handler(void* data, u16 joy, u16 state, u16 changed);

void phase1_input_sinc_handler(void* data, u16 joy);

//Check if there is a collition between player and walls
u8 phase1_collider(void * data, u16 offsety, u16 offsetx);

#endif